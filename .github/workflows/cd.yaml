name: Deployment
on:
  workflow_dispatch:
  push:
    branches:
      - "main"
    paths:
      - ".github/workflows/**"
      - "jest.config.js"
      - "package.json"
      - "src/**"
      - "tests/**"
      - "tsconfig.json"
      - "webpack.config.ts"
      - "yarn.lock"

permissions:
  issues: write
  contents: write
  pull-requests: write
  repository-projects: write

jobs:
  continuous-deployment:
    name: Deployment
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ‘‡ Checkout
        uses: actions/checkout@v3

      - name: ðŸ¤¹ Instal Deps
        run: yarn install

      - name: ðŸ§ª Test
        run: yarn test

      - name: ðŸ§± Build
        run: yarn build

      - name: ðŸ“Œ Commit & Push
        uses: GuillaumeFalourd/git-commit-push@v1.3
        with:
          commit_message: "chore: updates dist zip"
